const { Telegraf, Markup } = require('telegraf');
require('dotenv').config();

const bot = new Telegraf(process.env.BOT_TOKEN);

// Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ
const mainMenu = Markup.keyboard([
    ['ðŸ“– Ðž Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ'],
    ['ðŸ‘¥ ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²'],
    ['ðŸ’° Ð—Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ'],
    ['ðŸŽ® Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ']
]).resize();

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ /start
bot.start((ctx) => {
    const welcomeText = `âš¡ Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Energy of Money!

ðŸŽ¯ ÐœÑ‹ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÐ¼ Ð»ÑŽÐ´ÑÐ¼:
â€¢ Ð˜Ð·ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²ÑƒÑŽ Ð³Ñ€Ð°Ð¼Ð¾Ñ‚Ð½Ð¾ÑÑ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð¸Ð³Ñ€Ñƒ
â€¢ ÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² Ð´Ð»Ñ ÑÐ²Ð¾Ð¸Ñ… ÑƒÑÐ»ÑƒÐ³
â€¢ Ð—Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð´ÐµÐ½ÑŒÐ³Ð¸
â€¢ Ð Ð°Ð·Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ðµ Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð¸Ðµ

Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÑŽÑ‰Ð¸Ð¹ Ð²Ð°Ñ Ñ€Ð°Ð·Ð´ÐµÐ»:`;

    ctx.reply(welcomeText, mainMenu);
});

// Ðž Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ
bot.hears('ðŸ“– Ðž Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ', (ctx) => {
    const aboutText = `ðŸŽ® Energy of Money - ÑÑ‚Ð¾ Ð¸Ð½Ð½Ð¾Ð²Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ Ð¸Ð³Ñ€Ð° Ð¿Ð¾ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð¾Ð¹ Ð³Ñ€Ð°Ð¼Ð¾Ñ‚Ð½Ð¾ÑÑ‚Ð¸

ðŸŽ¯ ÐÐ°ÑˆÐ° Ð¼Ð¸ÑÑÐ¸Ñ:
ÐŸÐ¾Ð¼Ð¾Ñ‡ÑŒ ÐºÐ°Ð¶Ð´Ð¾Ð¼Ñƒ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÑƒ Ð¾ÑÐ²Ð¾Ð¸Ñ‚ÑŒ Ð¾ÑÐ½Ð¾Ð²Ñ‹ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð¾Ð³Ð¾ Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· ÑƒÐ²Ð»ÐµÐºÐ°Ñ‚ÐµÐ»ÑŒÐ½ÑƒÑŽ Ð¸Ð³Ñ€Ð¾Ð²ÑƒÑŽ Ð¼ÐµÑ…Ð°Ð½Ð¸ÐºÑƒ.

ðŸ“ˆ Ð§Ñ‚Ð¾ Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ:
â€¢ ÐŸÐ¾Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð¾Ð² Ð´ÐµÐ½ÐµÐ¶Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ñ‚Ð¾ÐºÐ°
â€¢ ÐÐ°Ð²Ñ‹ÐºÐ¸ Ð¸Ð½Ð²ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð°ÐºÑ‚Ð¸Ð²Ð°Ð¼Ð¸
â€¢ Ð Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ðµ Ð¿Ñ€ÐµÐ´Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ð³Ð¾ Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð¸Ñ
â€¢ ÐŸÑ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð·Ð½Ð°Ð½Ð¸Ñ Ð¾ Ð¿Ð°ÑÑÐ¸Ð²Ð½Ð¾Ð¼ Ð´Ð¾Ñ…Ð¾Ð´Ðµ

ðŸŽ² ÐšÐ°Ðº Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ:
1. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸ÑŽ
2. Ð£Ð¿Ñ€Ð°Ð²Ð»ÑÐ¹Ñ‚Ðµ Ñ„Ð¸Ð½Ð°Ð½ÑÐ°Ð¼Ð¸
3. Ð˜Ð½Ð²ÐµÑÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð² Ð°ÐºÑ‚Ð¸Ð²Ñ‹
4. Ð”Ð¾ÑÑ‚Ð¸Ð³Ð°Ð¹Ñ‚Ðµ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð¾Ð¹ ÑÐ²Ð¾Ð±Ð¾Ð´Ñ‹

ðŸ’¡ Ð˜Ð³Ñ€Ð° Ð¾ÑÐ½Ð¾Ð²Ð°Ð½Ð° Ð½Ð° Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð°Ñ… Ð Ð¾Ð±ÐµÑ€Ñ‚Ð° ÐšÐ¸Ð¹Ð¾ÑÐ°ÐºÐ¸ Ð¸ Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð° Ð´Ð»Ñ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾Ð¹ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸.`;

    // ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð²Ð¸Ð´ÐµÐ¾ (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ) Ð¸ Ñ‚ÐµÐºÑÑ‚
    ctx.replyWithVideo(
        { source: './assets/about-video.mp4' },
        { caption: aboutText }
    ).catch(() => {
        // Ð•ÑÐ»Ð¸ Ð²Ð¸Ð´ÐµÐ¾ Ð½ÐµÑ‚, Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐºÑÑ‚
        ctx.reply(aboutText);
    });
});

// ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²
bot.hears('ðŸ‘¥ ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²', (ctx) => {
    const clientsText = `ðŸŽ¯ ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð²Ð°ÑˆÐ¸Ñ… ÑƒÑÐ»ÑƒÐ³!

ðŸ’¼ ÐšÐ°Ðº ÑÑ‚Ð¾ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:
â€¢ Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐµÑ‚ÐµÑÑŒ ÐºÐ°Ðº Ð¼Ð°ÑÑ‚ÐµÑ€/ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚
â€¢ Ð£ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚Ðµ ÑÐ²Ð¾Ð¸ ÑƒÑÐ»ÑƒÐ³Ð¸ Ð¸ Ñ‚Ð°Ñ€Ð¸Ñ„Ñ‹
â€¢ ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÑ‚Ðµ Ð·Ð°ÑÐ²ÐºÐ¸ Ð¾Ñ‚ Ð¿Ð¾Ñ‚ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ñ… ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²
â€¢ Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚Ðµ Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð»ÑŽÐ´ÑŒÐ¼Ð¸

âœ… ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:
â€¢ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ðµ ÑÐ´ÐµÐ»ÐºÐ¸
â€¢ ÐŸÑ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ñ‹
â€¢ Ð£Ð´Ð¾Ð±Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹
â€¢ ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° 24/7

ðŸš€ ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ð·Ð°Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ ÑƒÐ¶Ðµ ÑÐµÐ³Ð¾Ð´Ð½Ñ!`;

    const clientsKeyboard = Markup.inlineKeyboard([
        [Markup.button.callback('ðŸ‘¨â€ðŸ’¼ Ð¡Ñ‚Ð°Ñ‚ÑŒ Ð¼Ð°ÑÑ‚ÐµÑ€Ð¾Ð¼', 'become_master')]
    ]);

    ctx.reply(clientsText, clientsKeyboard);
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ½Ð¾Ð¿ÐºÐ¸ "Ð¡Ñ‚Ð°Ñ‚ÑŒ Ð¼Ð°ÑÑ‚ÐµÑ€Ð¾Ð¼"
bot.action('become_master', (ctx) => {
    ctx.answerCbQuery();
    ctx.reply('âœ… ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! Ð¡ Ð²Ð°Ð¼Ð¸ ÑÐ²ÑÐ¶ÐµÑ‚ÑÑ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 24 Ñ‡Ð°ÑÐ¾Ð² Ð´Ð»Ñ Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹.\n\nðŸ“ž ÐžÐ¶Ð¸Ð´Ð°Ð¹Ñ‚Ðµ Ð·Ð²Ð¾Ð½ÐºÐ°!');
});

// Ð—Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ
bot.hears('ðŸ’° Ð—Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ', (ctx) => {
    const earnText = `ðŸ’° Ð—Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð¹Ñ‚Ðµ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð´ÐµÐ½ÑŒÐ³Ð¸!

ðŸŽ¯ Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ ÑÐ¿Ð¾ÑÐ¾Ð±Ñ‹ Ð·Ð°Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°:

1ï¸âƒ£ Ð ÐµÑ„ÐµÑ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°
â€¢ ÐŸÑ€Ð¸Ð³Ð»Ð°ÑˆÐ°Ð¹Ñ‚Ðµ Ð´Ñ€ÑƒÐ·ÐµÐ¹
â€¢ ÐŸÐ¾Ð»ÑƒÑ‡Ð°Ð¹Ñ‚Ðµ 20% Ñ Ð¸Ñ… Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº
â€¢ Ð‘ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚Ð½Ñ‹Ð¹ Ð´Ð¾Ñ…Ð¾Ð´

2ï¸âƒ£ ÐŸÐ°Ñ€Ñ‚Ð½ÐµÑ€ÑÐºÐ°Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°
â€¢ ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð³Ð°Ð¹Ñ‚Ðµ Ð½Ð°ÑˆÐ¸ ÐºÑƒÑ€ÑÑ‹
â€¢ Ð—Ð°Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ Ð´Ð¾ 50% Ñ Ð¿Ñ€Ð¾Ð´Ð°Ð¶
â€¢ Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ

3ï¸âƒ£ ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚-Ð¼ÐµÐ¹ÐºÐµÑ€
â€¢ Ð¡Ð¾Ð·Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ Ð¾ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð¾Ð¹ Ð³Ñ€Ð°Ð¼Ð¾Ñ‚Ð½Ð¾ÑÑ‚Ð¸
â€¢ ÐŸÐ¾Ð»ÑƒÑ‡Ð°Ð¹Ñ‚Ðµ Ð¾Ð¿Ð»Ð°Ñ‚Ñƒ Ð·Ð° ÐºÐ°Ñ‡ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹
â€¢ Ð Ð°Ð·Ð²Ð¸Ð²Ð°Ð¹Ñ‚Ðµ Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ð±Ñ€ÐµÐ½Ð´

4ï¸âƒ£ ÐœÐµÐ½Ñ‚Ð¾Ñ€ÑÑ‚Ð²Ð¾
â€¢ ÐžÐ±ÑƒÑ‡Ð°Ð¹Ñ‚Ðµ Ð´Ñ€ÑƒÐ³Ð¸Ñ… Ð¾ÑÐ½Ð¾Ð²Ð°Ð¼ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²
â€¢ ÐŸÐ¾Ð»ÑƒÑ‡Ð°Ð¹Ñ‚Ðµ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð´Ð¾Ñ…Ð¾Ð´
â€¢ ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ð¹Ñ‚Ðµ Ð»ÑŽÐ´ÑÐ¼ Ñ€Ð°ÑÑ‚Ð¸`;

    const earnKeyboard = Markup.inlineKeyboard([
        [Markup.button.callback('ðŸ“ ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°ÑÐ²ÐºÑƒ', 'leave_application')]
    ]);

    // ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ„Ð¾Ñ‚Ð¾ Ñ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸ÐµÐ¼
    const photos = [
        './assets/earn1.jpg',
        './assets/earn2.jpg',
        './assets/earn3.jpg'
    ];

    // ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð¿ÐµÑ€Ð²Ð¾Ðµ Ñ„Ð¾Ñ‚Ð¾ Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð¼
    ctx.replyWithPhoto(
        { source: photos[0] },
        { 
            caption: earnText,
            reply_markup: earnKeyboard.reply_markup
        }
    ).catch(() => {
        // Ð•ÑÐ»Ð¸ Ñ„Ð¾Ñ‚Ð¾ Ð½ÐµÑ‚, Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÐºÑÑ‚
        ctx.reply(earnText, earnKeyboard);
    });
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°ÑÐ²ÐºÑƒ"
bot.action('leave_application', (ctx) => {
    ctx.answerCbQuery();
    ctx.reply('ðŸ“ Ð—Ð°ÑÐ²ÐºÐ° Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð°! ÐÐ°Ñˆ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ ÑÐ²ÑÐ¶ÐµÑ‚ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð´Ð»Ñ Ð¾Ð±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰ÐµÐ³Ð¾ ÑÐ¿Ð¾ÑÐ¾Ð±Ð° Ð·Ð°Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°.\n\nâ° Ð’Ñ€ÐµÐ¼Ñ Ð¾Ñ‚Ð²ÐµÑ‚Ð°: Ð´Ð¾ 2 Ñ‡Ð°ÑÐ¾Ð²');
});

// Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ
bot.hears('ðŸŽ® Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ', (ctx) => {
    const gameText = `ðŸŽ® Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Energy of Money!

ðŸŽ¯ Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ€ÐµÐ¶Ð¸Ð¼ Ð¸Ð³Ñ€Ñ‹:

1ï¸âƒ£ Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¸Ð³Ñ€Ð° (30 Ð¼Ð¸Ð½)
â€¢ Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ Ð½Ð¾Ð²Ð¸Ñ‡ÐºÐ¾Ð²
â€¢ Ð˜Ð·ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¾ÑÐ½Ð¾Ð²
â€¢ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚

2ï¸âƒ£ ÐšÐ»Ð°ÑÑÐ¸Ñ‡ÐµÑÐºÐ°Ñ Ð¸Ð³Ñ€Ð° (2 Ñ‡Ð°ÑÐ°)
â€¢ ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¿Ð¾Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
â€¢ Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°
â€¢ ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼ Ð·Ð½Ð°Ð½Ð¸Ð¹

3ï¸âƒ£ Ð¢ÑƒÑ€Ð½Ð¸Ñ€ (4 Ñ‡Ð°ÑÐ°)
â€¢ Ð¡Ð¾Ñ€ÐµÐ²Ð½Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸
â€¢ ÐŸÑ€Ð¸Ð·Ñ‹ Ð¸ Ð½Ð°Ð³Ñ€Ð°Ð´Ñ‹
â€¢ ÐŸÑ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ñ‹Ð¹ ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ

ðŸš€ ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ð¸Ð³Ñ€Ñƒ Ð¿Ñ€ÑÐ¼Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ!`;

    const gameKeyboard = Markup.inlineKeyboard([
        [Markup.button.callback('ðŸš€ ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¸Ð³Ñ€Ñƒ', 'start_game')]
    ]);

    ctx.reply(gameText, gameKeyboard);
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¸Ð³Ñ€Ñƒ"
bot.action('start_game', (ctx) => {
    ctx.answerCbQuery();
    
    // Ð—Ð´ÐµÑÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ Ð²ÐµÐ±-Ð¸Ð³Ñ€Ð¾Ð¹
    const gameUrl = process.env.GAME_URL || 'https://energy8.vercel.app/';
    
    const gameKeyboard = Markup.inlineKeyboard([
        [Markup.button.url('ðŸŽ® ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¸Ð³Ñ€Ñƒ', gameUrl)]
    ]);

    ctx.reply('ðŸŽ® Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð² Ð¸Ð³Ñ€Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°!\n\nðŸŒ ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð¿Ð¾ ÑÑÑ‹Ð»ÐºÐµ Ð½Ð¸Ð¶Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ:', gameKeyboard);
});

// ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹
bot.on('text', (ctx) => {
    ctx.reply('ðŸ¤” ÐÐµ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽ ÑÑ‚Ñƒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¼ÐµÐ½ÑŽ Ð½Ð¸Ð¶Ðµ Ð´Ð»Ñ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸.', mainMenu);
});

// Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°
bot.launch().then(() => {
    console.log('ðŸ¤– Ð‘Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½!');
    console.log('ðŸ”— Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð±Ð¾Ñ‚Ð°: https://t.me/anreal_money_bot');
}).catch((error) => {
    console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð±Ð¾Ñ‚Ð°:', error);
});

// Graceful stop
process.once('SIGINT', () => bot.stop('SIGINT'));
process.once('SIGTERM', () => bot.stop('SIGTERM'));